!function(e){"use strict";e.browser||(e.browser={},e.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),e.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()),e.browser.device=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()));var t={prefix:"",suffix:"",affixesStay:!0,thousands:",",decimal:".",precision:2,allowZero:!1,allowNegative:!1,doubleClickSelection:!0,allowEmpty:!1,bringCaretAtEndOnFocus:!0},n={destroy:function(){return e(this).unbind(".maskMoney"),e.browser.msie&&(this.onpaste=null),this},applyMask:function(t){return r(t,e(this).data("settings"))},mask:function(t){return this.each(function(){var n=e(this);return"number"==typeof t&&n.val(t),n.trigger("mask")})},unmasked:function(){return this.map(function(){var t,n=e(this).val()||"0",a=-1!==n.indexOf("-");return e(n.split(/\D/).reverse()).each(function(e,n){if(n)return t=n,!1}),n=(n=n.replace(/\D/g,"")).replace(new RegExp(t+"$"),"."+t),a&&(n="-"+n),parseFloat(n)})},unmaskedWithOptions:function(){return this.map(function(){var n=e(this).val()||"0",a=e(this).data("settings")||t,r=new RegExp(a.thousandsForUnmasked||a.thousands,"g");return n=n.replace(r,""),parseFloat(n)})},init:function(n){return n=e.extend(e.extend({},t),n),this.each(function(){var t,i,o=e(this);function s(){var e,t,n,a,r,i=o.get(0),s=0,l=0;return"number"==typeof i.selectionStart&&"number"==typeof i.selectionEnd?(s=i.selectionStart,l=i.selectionEnd):(t=document.selection.createRange())&&t.parentElement()===i&&(a=i.value.length,e=i.value.replace(/\r\n/g,"\n"),(n=i.createTextRange()).moveToBookmark(t.getBookmark()),(r=i.createTextRange()).collapse(!1),n.compareEndPoints("StartToEnd",r)>-1?s=l=a:(s=-n.moveStart("character",-a),s+=e.slice(0,s).split("\n").length-1,n.compareEndPoints("EndToEnd",r)>-1?l=a:(l=-n.moveEnd("character",-a),l+=e.slice(0,l).split("\n").length-1))),{start:s,end:l}}function l(e){var n,a,i=o.val().length;o.val(r(o.val(),t)),n=o.val().length,t.reverse||(e-=i-n),a=e,t.formatOnBlur||o.each(function(e,t){if(t.setSelectionRange)t.focus(),t.setSelectionRange(a,a);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",a),n.moveStart("character",a),n.select()}})}function c(){var e=o.val();if(!t.allowEmpty||""!==e){var n=!isNaN(e)?e.indexOf("."):e.indexOf(t.decimal);if(t.precision>0)if(n<0)e+=t.decimal+new Array(t.precision+1).join(0);else{var a=e.slice(0,n),i=e.slice(n+1);e=a+t.decimal+i+new Array(t.precision+1-i.length).join(0)}else n>0&&(e=e.slice(0,n));o.val(r(e,t))}}function u(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function d(n){var a,r,i,l,c,d,v=(n=n||window.event).which||n.charCode||n.keyCode,p=t.decimal.charCodeAt(0);return void 0!==v&&(!(v<48||v>57)||v===p&&t.reverse?(a=!(o.val().length>=o.attr("maxlength")&&o.attr("maxlength")>=0),r=s(),i=r.start,l=r.end,c=!(r.start===r.end||!o.val().substring(i,l).match(/\d/)),d="0"===o.val().substring(0,1),!!(a||c||d)&&((v!==p||!function(){if(e=o.val().length,n=s(),0===n.start&&n.end===e)return!1;var e,n;return o.val().indexOf(t.decimal)>-1}())&&(!!t.formatOnBlur||(u(n),f(n),!1)))):function(n,a){return 45===n?(o.val((r=o.val(),t.allowNegative?""!==r&&"-"===r.charAt(0)?r.replace("-",""):"-"+r:r)),!1):43===n?(o.val(o.val().replace("-","")),!1):13===n||9===n||(!(!e.browser.mozilla||37!==n&&39!==n||0!==a.charCode)||(u(a),!0));var r}(v,n))}function f(e){var t,n,a,r,i=(e=e||window.event).which||e.charCode||e.keyCode,c="";i>=48&&i<=57&&(c=String.fromCharCode(i)),n=(t=s()).start,a=t.end,r=o.val(),o.val(r.substring(0,n)+c+r.substring(a,r.length)),l(n+1)}function v(){setTimeout(function(){c()},0)}function p(){return(parseFloat("0")/Math.pow(10,t.precision)).toFixed(t.precision).replace(new RegExp("\\.","g"),t.decimal)}t=e.extend({},n),t=e.extend(t,o.data()),o.data("settings",t),o.on("keyup",function(e){(e=e||window.event).which||e.charCode||e.keyCode;l(s().start+1)}),e.browser.device&&o.attr("type","tel"),o.unbind(".maskMoney"),o.bind("keypress.maskMoney",d),o.bind("keydown.maskMoney",function(e){var n,a,r,i,c,d=(e=e||window.event).which||e.charCode||e.keyCode;return void 0!==d&&(a=(n=s()).start,r=n.end,8!==d&&46!==d&&63272!==d||(u(e),i=o.val(),a===r&&(8===d?""===t.suffix?a-=1:(c=i.split("").reverse().join("").search(/\d/),r=1+(a=i.length-c-1)):r+=1),o.val(i.substring(0,a)+i.substring(r,i.length)),l(a),!1))}),o.bind("blur.maskMoney",function(n){if(e.browser.msie&&d(n),t.formatOnBlur&&o.val()!==i&&f(n),""===o.val()&&t.allowEmpty)o.val("");else if(""===o.val()||o.val()===a(p(),t))t.allowZero?t.affixesStay?o.val(a(p(),t)):o.val(p()):o.val("");else if(!t.affixesStay){var r=o.val().replace(t.prefix,"").replace(t.suffix,"");o.val(r)}o.val()!==i&&o.change()}),o.bind("focus.maskMoney",function(){i=o.val(),c();var e,n=o.get(0);t.selectAllOnFocus?n.select():n.createTextRange&&t.bringCaretAtEndOnFocus&&((e=n.createTextRange()).collapse(!1),e.select())}),o.bind("click.maskMoney",function(){var e,n=o.get(0);t.selectAllOnFocus||(n.setSelectionRange&&t.bringCaretAtEndOnFocus?(e=o.val().length,n.setSelectionRange(e,e)):o.val(o.val()))}),o.bind("dblclick.maskMoney",function(){var e,n,a=o.get(0);a.setSelectionRange&&t.bringCaretAtEndOnFocus?(n=o.val().length,e=t.doubleClickSelection?0:n,a.setSelectionRange(e,n)):o.val(o.val())}),o.bind("cut.maskMoney",v),o.bind("paste.maskMoney",v),o.bind("mask.maskMoney",c)})}};function a(e,t){var n="";return e.indexOf("-")>-1&&(e=e.replace("-",""),n="-"),e.indexOf(t.prefix)>-1&&(e=e.replace(t.prefix,"")),e.indexOf(t.suffix)>-1&&(e=e.replace(t.suffix,"")),n+t.prefix+e+t.suffix}function r(e,t){return t.allowEmpty&&""===e?"":t.reverse?function(e,t){var n,r=e.indexOf("-")>-1&&t.allowNegative?"-":"",o=e.replace(t.prefix,"").replace(t.suffix,""),s=o.split(t.decimal)[0],l="";""===s&&(s="0");if(n=i(s,r,t),t.precision>0){var c=o.split(t.decimal);c.length>1&&(l=c[1]),n+=t.decimal+l;var u=Number.parseFloat(s+"."+l).toFixed(t.precision),d=u.toString().split(t.decimal)[1];n=n.split(t.decimal)[0]+"."+d}return a(n,t)}(e,t):function(e,t){var n,r,o,s=e.indexOf("-")>-1&&t.allowNegative?"-":"",l=e.replace(/[^0-9]/g,""),c=l.slice(0,l.length-t.precision);if(n=i(c,s,t),t.precision>0){if(!isNaN(e)&&e.indexOf(".")){var u=e.substr(e.indexOf(".")+1);l+=new Array(t.precision+1-u.length).join(0),c=l.slice(0,l.length-t.precision),n=i(c,s,t)}r=l.slice(l.length-t.precision),o=new Array(t.precision+1-r.length).join(0),n+=t.decimal+o+r}return a(n,t)}(e,t)}function i(e,t,n){return""===(e=(e=e.replace(/^0*/g,"")).replace(/\B(?=(\d{3})+(?!\d))/g,n.thousands))&&(e="0"),t+e}e.fn.maskMoney=function(t){return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.maskMoney"):n.init.apply(this,arguments)}}(window.jQuery||window.Zepto);