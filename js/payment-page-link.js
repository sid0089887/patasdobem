$(document).ready(function(){runHeightNamePlan();runHeightValuePlan();runHeightAdditionalInfo();if($('#email').val()!=''){getInfoCustomerByEmail($('#email').val());}
if($('#createCustomer').length>0){appendFingerprintRequestId($('#createCustomer'));}
$('#createCustomer').validate({ignore:'',errorPlacement:function(error,element){error.appendTo(element.parents('.form-group'));},rules:{paymenttypechoice:{required:true},type:{required:true},name:{required:true,maxlength:50},email:{required:true,email:true,maxlength:50,validateEmailCustomOnlyError:true},additionalInfo:{maxlength:255},state:{maxlength:2},number:{maxlength:50},street:{maxlength:100},complement:{maxlength:100},neighborhood:{maxlength:100},city:{maxlength:100},internalId:{maxlength:50},celphoneNumber:{phoneAndCellphone:true},phoneNumber:{phoneAndCellphone:true},zipcode:{minlength:9}},submitHandler:function(form){if($(form).valid()){$('button[type="submit"]').attr('disabled','disabled');appendFormTokenInput(form);form.submit();}}});if($('#phoneNumber').length){mascaraTelefone(document.getElementById('phoneNumber'));}
if($('#celphoneNumber').length){mascaraTelefone(document.getElementById('celphoneNumber'));}
$('#email').change(function(){var email=$('#createCustomer input[name="email"]').val();getInfoCustomerByEmail(email);});$('#document').change(function(){var document=$('#createCustomer input[name="document"]').val();var type=$('#createCustomer input[name="type"]:checked').val();var email=$('#createCustomer input[name="email"]').val();$.ajax({url:PARAMETER_0+"/verify-customer-document",type:'POST',dataType:'json',data:{document:document,type:type,email:email}}).done(function(json){putInfoByCustomer(json);});});$('#createCustomer input[name="zipcode"]').change(function(){var zipcode=$(this).val();$.ajax({url:'busca-endereco',type:'POST',dataType:'json',data:{zipcode:zipcode}}).done(function(data){$('#createCustomer input[name="street"]').val(data.street);$('#createCustomer input[name="city"]').val(data.city);$('#createCustomer input[name="neighborhood"]').val(data.neighborhood);$('#createCustomer select[name="state"] option').each(function(){$(this).removeAttr('selected');})
$('#createCustomer select[name="state"]').val(data.state);$('#createCustomer select[name="state"] option[value="'+data.state+'"]').attr('selected','selected');if(data.street!=''){$('#createCustomer input[name="number"]').focus();}else{$('#createCustomer input[name="street"]').focus();}});});if($('input[name="paymenttypechoice"]').length){var value=$('input[name="paymenttypechoice"]:checked').val();runInfoByItemAndTypePayment(value);$('input[name="paymenttypechoice"]').change(function(){var value=$(this).val();runInfoByItemAndTypePayment(value);});}});window.onload=function(){if($('.g-recaptcha-response').length){$('.g-recaptcha-response').rules('add',{required:true});}};$(window).resize(function(){runHeightNamePlan();runHeightValuePlan();runHeightAdditionalInfo();});function getInfoCustomerByEmail(email){$.ajax({url:PARAMETER_0+"/verify-customer-email",type:'POST',dataType:'json',data:{email:email}}).done(function(json){putInfoByCustomer(json);});}
function putInfoByCustomer(json){if(json){var customer=json.customer;for(var fieldName in customer){var value=customer[fieldName];$('input[type="text"][name="'+fieldName+'"]').val(value);if(fieldName=='document'&&json.isActiveValidateEmail==false){continue;}
if(fieldName=='email'&&json.isActiveValidateEmail){continue;}
if($.isNumeric(fieldName)){continue;}
$('input[type="text"][name="'+fieldName+'"]').attr('disabled','disabled');$('textarea[name="'+fieldName+'"]').val(value);$('select[name="'+fieldName+'"]').val(value).attr('disabled','disabled');$('input[type="radio"][id="radio'+value+'"]').prop('checked',true);if(Array.isArray(value)){for(var key in value){var eachValue=value[key];$('input[type="checkbox"][name="'+fieldName+'[]"][value="'+eachValue+'"]').prop('checked',true);}}else{$('input[type="checkbox"][name="'+fieldName+'[]"][value="'+value+'"]').prop('checked',true);}}
if(json.exists===true){disabledInputsByDocument(json.isActiveValidateEmail);$('#messageCustomer').html(json.message);$('.form-group').removeClass('has-error');$('.error-validate').remove();$('#boxName').removeClass('col-md-12');$('#boxName').addClass('col-md-10');if($('.btn-edit-payment-page').length){$('.btn-edit-payment-page').css('display','block');}
if($('#boxDocument').parent('.row').find('.btn-edit-payment-page').length){$('#boxDocument').removeClass('col-md-12');$('#boxDocument').addClass('col-md-10');}}
if(json.type){$('input[name="document"]').attr('data-type',json.type);$('input[type="radio"][name="type"][value="'+json.type+'"]').trigger('click');}}}
$('.btn-edit-payment-page').on('click',function(){var inputName=$(this).data('item');if(inputName=='address'){enableBoxAddress();}else{var item=$('input[name="'+inputName+'"]');if(inputName=='document'){var type=item.data('type');if(type=='CPF'){item.addClass('mask-cpf');}else{item.addClass('mask-cnpj');}}
item.removeAttr('disabled');item.removeAttr('readonly');item.val('');item.focus();}
$(this).css('display','none');});function enableBoxAddress(){var allInputs=$('#box-address').find('input,select');allInputs.each(function(){$(this).removeAttr('disabled');$(this).removeAttr('readonly');$(this).val('');});$('input[name="zipcode"]').focus();}
function disabledInputsByDocument(isActiveValidateEmail){$('input[name="name"]').attr('readonly','readonly');if(!isActiveValidateEmail){$('input[name="email"]').attr('readonly','readonly');}}
function runInfoByItemAndTypePayment(type){var itemId='';if(typeof PARAMETER_1!='undefined'){var itemId=PARAMETER_1;}
if(typeof PARAMETER_4!='undefined'){var itemId=PARAMETER_4;}
$.ajax({url:PARAMETER_0+'/get-info-by-item-and-typepayment',type:'post',dataType:'json',data:{type:type,itemId:itemId},success:function(data){if(data.type==true){$('.value-plan').text(data.price);$('.tx-payment-type').text(data.stringPaymentType);changeRequiredAddress(data.isRequiredAddress,data.isRequiredDocument);}else{}}});}
function changeRequiredAddress(isRequiredAddress,isRequiredDocument){var inputsAddressBox=$('.asterisk-address').parents('.form-group');if(isRequiredAddress){isRequiredDocument=true;$('.asterisk-address').show();inputsAddressBox.each(function(){$(this).find('input,select').addClass('required');});}else{$('.asterisk-address').hide();inputsAddressBox.each(function(){$(this).find('input,select').removeClass('required');});}
if(!isRequiredDocument){removeDocumentRequired();}else{putDocumentRequired();}}
function putDocumentRequired(){var boxDocument=$('input[name="document"]').parents('.form-group');var inputDocument=boxDocument.find('input');var asteriskDocument=boxDocument.find('.asterisk');asteriskDocument.removeClass('none');inputDocument.addClass('requiredField');}
function removeDocumentRequired(){var boxDocument=$('input[name="document"]').parents('.form-group');var inputDocument=boxDocument.find('input');var asteriskDocument=boxDocument.find('.asterisk');asteriskDocument.addClass('none');inputDocument.removeClass('requiredField');}
function runHeightNamePlan(){runHeightElement($('.bloco-nome-plano-valor h2'));runHeightElement($('.bloco-1 h2'));}
function runHeightValuePlan(){runHeightElement($('.bloco-nome-plano-valor .valor'));runHeightElement($('.bloco-1 .valor'));}
function runHeightAdditionalInfo(){runHeightElement($('.tx-important'));}